<section class="max-w-4xl mx-auto px-4 py-6">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold">Trash üóëÔ∏è</h2>
    <button
      class="px-3 py-1 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition"
      (click)="emptyTrash()"
    >
      Empty Trash
    </button>
  </div>

  <!-- Movements Section -->
  <div class="mb-8">
    <h3 class="text-lg font-bold text-gray-700 mb-3">Deleted Movements</h3>

    <ng-container *ngIf="groupedMovements.length > 0; else noMovements">
      <div *ngFor="let group of groupedMovements" class="mb-6">
        <h4 class="text-md font-semibold text-gray-600 mb-2">
          {{ group.date | date : "fullDate" }}
        </h4>

        <ul class="divide-y divide-gray-200 border border-gray-200 rounded-lg">
          <li
            *ngFor="let movement of group.items"
            class="flex justify-between items-center p-3 hover:bg-gray-50 transition relative"
          >
            <!-- Left stripe (color by type) -->
            <div
              class="absolute left-0 top-0 h-full w-1"
              [ngStyle]="{
                'background-color': movement.amount >= 0 ? '#22c55e' : '#ef4444'
              }"
            ></div>

            <!-- Content -->
            <div class="pl-4 flex justify-between items-center w-full">
              <div>
                <p class="font-medium text-gray-800">{{ movement.purpose }}</p>
                <p class="text-sm text-gray-400 italic">
                  {{ movement.category }}
                </p>
              </div>

              <!-- Actions -->
              <div class="flex gap-2">
                <button
                  class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition"
                  (click)="restoreMovement(movement)"
                >
                  Restore
                </button>
                <button
                  class="px-3 py-1 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition"
                  (click)="deleteMovementForever(movement)"
                >
                  Delete
                </button>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </ng-container>

    <ng-template #noMovements>
      <p class="text-gray-500 text-sm">No deleted movements</p>
    </ng-template>
  </div>

  <!-- Categories Section -->
  <div>
    <h3 class="text-lg font-bold text-gray-700 mb-3">Deleted Categories</h3>

    <ng-container *ngIf="categories.length > 0; else noCategories">
      <ul class="divide-y divide-gray-200 border border-gray-200 rounded-lg">
        <li
          *ngFor="let cat of categories"
          class="flex justify-between items-center p-3 hover:bg-gray-50 transition relative"
        >
          <!-- Left stripe (color from cat.color) -->
          <div
            class="absolute left-0 top-0 h-full w-1"
            [ngStyle]="{ 'background-color': cat.color }"
          ></div>

          <!-- Content -->
          <div class="pl-4 flex justify-between items-center w-full">
            <div class="flex items-center gap-3">
              <i
                class="bi bi-dash-circle text-red-500 text-2xl"
                *ngIf="cat.type === 'expense'"
              ></i>
              <i
                class="bi bi-plus-circle text-green-500 text-2xl"
                *ngIf="cat.type === 'income'"
              ></i>

              <div>
                <p class="font-medium text-gray-800 flex items-center gap-2">
                  {{ cat.name }}
                  <span *ngIf="cat.favourite" class="text-yellow-500">‚òÖ</span>
                </p>
                <p class="text-xs text-gray-500 capitalize">
                  <!-- Deleted on {{ cat.deletedAt | date : "mediumDate" }} -->
                </p>
              </div>
            </div>

            <!-- Actions -->
            <div class="flex gap-2">
              <button
                class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition"
                (click)="restoreCategory(cat)"
              >
                Restore
              </button>
              <button
                class="px-3 py-1 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition"
                (click)="deleteCategoryForever(cat)"
              >
                Delete
              </button>
            </div>
          </div>
        </li>
      </ul>
    </ng-container>

    <ng-template #noCategories>
      <p class="text-gray-500 text-sm">No deleted categories</p>
    </ng-template>
  </div>
</section>

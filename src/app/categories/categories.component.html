<app-spinner *ngIf="isLoading"></app-spinner>
<section class="max-w-4xl mx-auto px-4 py-6">
  <!-- Heading Row -->
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-semibold">Categories</h2>
    <button
      class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-indigo-700 active:scale-95 transition-all duration-200 ease-out"
      (click)="openPopup()"
    >
      <i class="bi bi-plus-circle"></i>
      Add Category
    </button>
  </div>

  <ng-container *ngIf="categories.length > 0; else emptyState">
    <ul class="divide-y divide-gray-200 border border-gray-200 rounded-lg">
      <li
        *ngFor="let cat of categories; let i = index"
        class="flex justify-between items-center p-3 hover:bg-gray-50 transition relative"
      >
        <!-- Left Stripe -->
        <div
          class="absolute left-0 top-0 h-full w-1"
          [ngStyle]="{ 'background-color': cat.color }"
        ></div>

        <!-- Content -->
        <div class="pl-4 flex justify-between items-center w-full">
          <!-- Icon + Info -->
          <div class="flex items-center gap-3">
            <i
              class="bi bi-dash-circle text-red-500 text-2xl"
              *ngIf="cat.type === 'expense'"
            ></i>
            <i
              class="bi bi-plus-circle text-green-500 text-2xl"
              *ngIf="cat.type === 'income'"
            ></i>

            <div>
              <p class="font-medium text-gray-800 flex items-center gap-2">
                {{ cat.name }}
                <span *ngIf="cat.favourite" class="text-yellow-500">â˜…</span>
              </p>
              <p class="text-xs text-gray-500 capitalize">{{ cat.type }}</p>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex gap-2">
            <!-- <button
              class="p-2 rounded-full text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 transition"
              title="Edit"
              (click)="edit(i)"
            >
              <i class="bi bi-pencil"></i>
            </button>
            <button
              class="p-2 rounded-full text-gray-500 hover:text-red-600 hover:bg-red-50 transition"
              title="Delete"
              (click)="delete(cat)"
            >
              <i class="bi bi-trash"></i>
            </button> -->
            <button
              class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition"
              (click)="edit(i)"
            >
              Edit
            </button>
            <button
              class="px-3 py-1 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition"
              (click)="delete(cat)"
            >
              Delete
            </button>
          </div>
        </div>
      </li>
    </ul>
  </ng-container>

  <!-- Empty State -->
  <ng-template #emptyState>
    <div
      class="flex flex-col items-center justify-center p-10 text-center border border-dashed border-gray-300 rounded-lg"
    >
      <i class="bi bi-folder-x text-4xl text-gray-400 mb-3"></i>
      <p class="text-gray-600 font-medium mb-1">No categories found</p>
      <p class="text-sm text-gray-500 mb-4">
        Start by adding your first category to organize expenses & income.
      </p>
    </div>
  </ng-template>
</section>
